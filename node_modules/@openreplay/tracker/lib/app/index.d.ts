import Message from "../messages/message.js";
import Nodes from "./nodes.js";
import Observer from "./observer/top_observer.js";
import Ticker from "./ticker.js";
import type { Options as ObserverOptions } from "./observer/top_observer.js";
import type { Options as WebworkerOptions } from "../messages/webworker.js";
export interface OnStartInfo {
    sessionID: string;
    sessionToken: string;
    userUUID: string;
}
export declare type Options = {
    revID: string;
    node_id: string;
    session_token_key: string;
    session_pageno_key: string;
    local_uuid_key: string;
    ingestPoint: string;
    resourceBaseHref: string | null;
    __is_snippet: boolean;
    __debug_report_edp: string | null;
    __debug_log: boolean;
    onStart?: (info: OnStartInfo) => void;
} & ObserverOptions & WebworkerOptions;
declare type Callback = () => void;
declare type CommitCallback = (messages: Array<Message>) => void;
export declare const DEFAULT_INGEST_POINT = "https://api.openreplay.com/ingest";
export default class App {
    readonly nodes: Nodes;
    readonly ticker: Ticker;
    readonly projectKey: string;
    private readonly messages;
    readonly observer: Observer;
    private readonly startCallbacks;
    private readonly stopCallbacks;
    private readonly commitCallbacks;
    private readonly options;
    private readonly revID;
    private _sessionID;
    private isActive;
    private version;
    private readonly worker?;
    constructor(projectKey: string, sessionToken: string | null | undefined, opts: Partial<Options>);
    private _debug;
    send(message: Message, urgent?: boolean): void;
    private commit;
    attachCommitCallback(cb: CommitCallback): void;
    addCommitCallback(cb: CommitCallback): void;
    safe<T extends (...args: any[]) => void>(fn: T): T;
    attachStartCallback(cb: Callback): void;
    attachStopCallback(cb: Callback): void;
    attachEventListener(target: EventTarget, type: string, listener: EventListener, useSafe?: boolean, useCapture?: boolean): void;
    getSessionToken(): string | undefined;
    getSessionID(): string | undefined;
    getHost(): string;
    getProjectKey(): string;
    getBaseHref(): string;
    resolveResourceURL(resourceURL: string): string;
    isServiceURL(url: string): boolean;
    active(): boolean;
    private _start;
    start(reset?: boolean): Promise<OnStartInfo>;
    stop(): void;
}
export {};
