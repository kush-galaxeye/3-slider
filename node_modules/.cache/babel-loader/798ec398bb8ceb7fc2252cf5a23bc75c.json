{"ast":null,"code":"import { SetPageLocation, SetViewportSize, SetPageVisibility } from \"../messages/index.js\";\nexport default function (app) {\n  let url, width, height;\n  let navigationStart = performance.timing.navigationStart;\n  const sendSetPageLocation = app.safe(() => {\n    const {\n      URL\n    } = document;\n\n    if (URL !== url) {\n      url = URL;\n      app.send(new SetPageLocation(url, document.referrer, navigationStart));\n      navigationStart = 0;\n    }\n  });\n  const sendSetViewportSize = app.safe(() => {\n    const {\n      innerWidth,\n      innerHeight\n    } = window;\n\n    if (innerWidth !== width || innerHeight !== height) {\n      width = innerWidth;\n      height = innerHeight;\n      app.send(new SetViewportSize(width, height));\n    }\n  });\n  const sendSetPageVisibility = document.hidden === undefined ? Function.prototype : app.safe(() => app.send(new SetPageVisibility(document.hidden)));\n  app.attachStartCallback(() => {\n    url = '';\n    width = height = -1;\n    sendSetPageLocation();\n    sendSetViewportSize();\n    sendSetPageVisibility();\n  });\n\n  if (document.hidden !== undefined) {\n    app.attachEventListener(document, 'visibilitychange', sendSetPageVisibility, false, false);\n  }\n\n  app.ticker.attach(sendSetPageLocation, 1, false);\n  app.ticker.attach(sendSetViewportSize, 5, false);\n}","map":{"version":3,"sources":["/Users/kushthakker/Downloads/imagecompare-both/node_modules/@openreplay/tracker/lib/modules/viewport.js"],"names":["SetPageLocation","SetViewportSize","SetPageVisibility","app","url","width","height","navigationStart","performance","timing","sendSetPageLocation","safe","URL","document","send","referrer","sendSetViewportSize","innerWidth","innerHeight","window","sendSetPageVisibility","hidden","undefined","Function","prototype","attachStartCallback","attachEventListener","ticker","attach"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,eAA1B,EAA2CC,iBAA3C,QAAqE,sBAArE;AACA,eAAe,UAAUC,GAAV,EAAe;AAC1B,MAAIC,GAAJ,EAASC,KAAT,EAAgBC,MAAhB;AACA,MAAIC,eAAe,GAAGC,WAAW,CAACC,MAAZ,CAAmBF,eAAzC;AACA,QAAMG,mBAAmB,GAAGP,GAAG,CAACQ,IAAJ,CAAS,MAAM;AACvC,UAAM;AAAEC,MAAAA;AAAF,QAAUC,QAAhB;;AACA,QAAID,GAAG,KAAKR,GAAZ,EAAiB;AACbA,MAAAA,GAAG,GAAGQ,GAAN;AACAT,MAAAA,GAAG,CAACW,IAAJ,CAAS,IAAId,eAAJ,CAAoBI,GAApB,EAAyBS,QAAQ,CAACE,QAAlC,EAA4CR,eAA5C,CAAT;AACAA,MAAAA,eAAe,GAAG,CAAlB;AACH;AACJ,GAP2B,CAA5B;AAQA,QAAMS,mBAAmB,GAAGb,GAAG,CAACQ,IAAJ,CAAS,MAAM;AACvC,UAAM;AAAEM,MAAAA,UAAF;AAAcC,MAAAA;AAAd,QAA8BC,MAApC;;AACA,QAAIF,UAAU,KAAKZ,KAAf,IAAwBa,WAAW,KAAKZ,MAA5C,EAAoD;AAChDD,MAAAA,KAAK,GAAGY,UAAR;AACAX,MAAAA,MAAM,GAAGY,WAAT;AACAf,MAAAA,GAAG,CAACW,IAAJ,CAAS,IAAIb,eAAJ,CAAoBI,KAApB,EAA2BC,MAA3B,CAAT;AACH;AACJ,GAP2B,CAA5B;AAQA,QAAMc,qBAAqB,GAAGP,QAAQ,CAACQ,MAAT,KAAoBC,SAApB,GACxBC,QAAQ,CAACC,SADe,GAExBrB,GAAG,CAACQ,IAAJ,CAAS,MAAMR,GAAG,CAACW,IAAJ,CAAS,IAAIZ,iBAAJ,CAAsBW,QAAQ,CAACQ,MAA/B,CAAT,CAAf,CAFN;AAGAlB,EAAAA,GAAG,CAACsB,mBAAJ,CAAwB,MAAM;AAC1BrB,IAAAA,GAAG,GAAG,EAAN;AACAC,IAAAA,KAAK,GAAGC,MAAM,GAAG,CAAC,CAAlB;AACAI,IAAAA,mBAAmB;AACnBM,IAAAA,mBAAmB;AACnBI,IAAAA,qBAAqB;AACxB,GAND;;AAOA,MAAIP,QAAQ,CAACQ,MAAT,KAAoBC,SAAxB,EAAmC;AAC/BnB,IAAAA,GAAG,CAACuB,mBAAJ,CAAwBb,QAAxB,EAAkC,kBAAlC,EAAsDO,qBAAtD,EAA6E,KAA7E,EAAoF,KAApF;AACH;;AACDjB,EAAAA,GAAG,CAACwB,MAAJ,CAAWC,MAAX,CAAkBlB,mBAAlB,EAAuC,CAAvC,EAA0C,KAA1C;AACAP,EAAAA,GAAG,CAACwB,MAAJ,CAAWC,MAAX,CAAkBZ,mBAAlB,EAAuC,CAAvC,EAA0C,KAA1C;AACH","sourcesContent":["import { SetPageLocation, SetViewportSize, SetPageVisibility, } from \"../messages/index.js\";\nexport default function (app) {\n    let url, width, height;\n    let navigationStart = performance.timing.navigationStart;\n    const sendSetPageLocation = app.safe(() => {\n        const { URL } = document;\n        if (URL !== url) {\n            url = URL;\n            app.send(new SetPageLocation(url, document.referrer, navigationStart));\n            navigationStart = 0;\n        }\n    });\n    const sendSetViewportSize = app.safe(() => {\n        const { innerWidth, innerHeight } = window;\n        if (innerWidth !== width || innerHeight !== height) {\n            width = innerWidth;\n            height = innerHeight;\n            app.send(new SetViewportSize(width, height));\n        }\n    });\n    const sendSetPageVisibility = document.hidden === undefined\n        ? Function.prototype\n        : app.safe(() => app.send(new SetPageVisibility(document.hidden)));\n    app.attachStartCallback(() => {\n        url = '';\n        width = height = -1;\n        sendSetPageLocation();\n        sendSetViewportSize();\n        sendSetPageVisibility();\n    });\n    if (document.hidden !== undefined) {\n        app.attachEventListener(document, 'visibilitychange', sendSetPageVisibility, false, false);\n    }\n    app.ticker.attach(sendSetPageLocation, 1, false);\n    app.ticker.attach(sendSetViewportSize, 5, false);\n}\n"]},"metadata":{},"sourceType":"module"}